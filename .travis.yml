# Copyright (c) 2018 OpenJAX
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the "Software"), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included in
# all copies or substantial portions of the Software.
#
# You should have received a copy of The MIT License (MIT) along with this
# program. If not, see <http://opensource.org/licenses/MIT/>.

language: java
jdk:
- oraclejdk8
- oraclejdk11
install:
- cp settings.xml $HOME/.m2/settings.xml && rm -rf ~/.m2/repository/org/openjax
script:
- 'if [ "$TRAVIS_COMMIT_MESSAGE" = "Update README.md" ]; then
    return;
  elif [ "$TRAVIS_JDK_VERSION" = "oraclejdk8" ] &&
      [ "$TRAVIS_BRANCH" = "master" ] &&
      [ "$TRAVIS_PULL_REQUEST" = "false" ]; then
    sh -c "$SIGNING_KEY" | $GPG_EXECUTABLE --fast-import &> /dev/null &&
    mvn -e -Dmaven.rtest.skip -DrepoToken=$REPO_TOKEN clean deploy -P javadoc,report,deploy;
  else
    mvn -e -Dmaven.rtest.skip clean install;
  fi'
cache:
  directories:
    - ~/.m2/repository
env:
  global:
  - secure: 05UKl/wzDhhSE9V7QSKvAsZJ9fPm9YVGzQal39mrHORXlX/wGb8NO1ztwNOKHwbqMe03abKd4rtuKxDiHY/EU26QYvIHeAEjzRB9O3ujk+Tbb/j1kFDlZXmKCs3gDboy+Vlf0nynqIDMUUHl2231L6VyNVws0QQEtUzfxHo/lgifYyyJi3YR5T2LspFlYjm5rSaThih0peoFfjKMFMSaF3wEt2Rrt1BvHsxFetMbtwb2E3BcXNtm6zLXIT475toKTeSA5mAXdKHR0t63cVaTQgHdT1GghkvJ5wBdIooUB22GGtbrIEgtYInIibkzrTmIfRcGvMhzSg8ilqO3Bo6CBgR38xqHuq6qyqvZMkDWyXKpjhmWi7kHQxwImbzIKuie/PinzcM+qg9K90KNk3O64ryOKuetelpn1MzLwNu2zU9p3ky86ynRps5lxb46BTV/7A3DX0upoyzjX7+oyIv/PN3l9i9QfcME3/KNUGJI035E8Z+2zt54emL5EPDaDNI4O+8X7MfdTyzffFuWH6oC0vr1SnEt2POMZ8nOe3FArmGxsa32DnLjYcDnX2IUee10IrFnQE94cWp8P/PLl7/qBejON/qj/bbCmyLWdId/ygmv7rjLRL4acYf5Z4fxdwDp+n3X9wno817o+g4B55DaC7cHAawPwNDwEQqJtrNb7rk=
  - secure: nxCjwZTAiyDhxbDgNpIVGgwF/0d7Kgk/YvWIpSxuke/m8VYVmLOwEn3z7dMCN+5bq8lpSLKHgmnlLRpxoOE/yCkeVRziF97J22rVVCyKw9FnPxFC1wuymEkk46H5DHVbMB5eSb7+ooaUeaZCWR8R5URxPyOYw3kYK0JtEm4/Rjqp/Tey0LkKxwst/vjPqvIDG3wLPdOOiBAa/7ChMPqUBGFSejhPkp2GRk2T9jCQpQbE64gGicjFUk93/ZvvRmlwPqaXgdCzNTsEuzWMm5oxdRhNJu4fS+crtLyY/EOXC59W4EVCxhhCnEkLIRW+U61ODW8AsvpUQ5JiABLXVfMMyNgNCqNBfdvIg8gMVZZvxhtdZorK/0rftGTUGtA/2xjSO+4wd+qF5BTOGHJxt3DvmFu9bVMwz0fBUGXyCctpXy7q6y+YoQzNbdPNtzS/5dvx2iB1/QgIQSxAvpJ3H2j10o61UHM/5n3w0QucUTHzLoF+ndbcHgm1nlHxxc4dmkA3d/+uIiE/QYlZeoOngUHohXzS+GCYPUKF60/DlkLk4z2pBwRjlmmpVW7/elZY6d4hpPXxm+/VihJzYqfjFBsKy5F9B0stTti7MhbYueUhwD2yJbhkFujCgBMEzRQ7JnOsRxlFbzUgJMKprWH5J4QWRcU3AwPiKtgOLUBUfOw5AkA=
  - secure: qgTf5J1p03jCJvnvlFc8OrF+E8vZkHrS1qx1yqnDYhE9l1lImm9h9Z35UFV/9cRFwWks0Kuv0CSJezvhwxbuOSPfUUj1NibphbNrO95ohF8Pn8jF8Uxt2Q5cGQbiLcb37Bq3wHf5HfkIPOa9QoYMKLEH21KoFWgacVhysjbWo/djRPuNdgmCyiFYSM3xNLvfSnoJ5AqFKaCq5gl80yNb04MJ0fs2r2YWht8wfgedAS+l5qxoUmDKwKFWCPLc5ADZJbNiW54Wd+ty9AM0OipbFz3wrqgM4TpJ95tPwUuJkqBXvyUP1yMKK4xs4p47DoiDHS7kJ2fr8uR9t//pm1pqpx+B4aU6v+lVJsnFTYYD0smsn5Idn6Yhv3RvqKVIyPujvssZHcOOzxRxzMz54bW7FQgOc2Kq6EP60iHrM6cmDDB61zgGUcNZeJIvVX1nxlYIo7mHfNSyDE1UP3L/dXM0pZ3skIzhIwRR44DBOrEm94+ElIJYeZjW59ewEGtA68GlH5nkcGQ4L70GVKHQ1xCF6kwdVoq+kbHeOL/btgrISY8Uh1Py6+z3Wt83n/7yO+caylp27hYO3GvDC19xcOv37owtX3LtQlhh4tCRT+8bteqL6hEEjPttaKKgwYOL0+Hyi2llynsO98fEAYaAalrrDz2r/PXRKzXkyuCjJv2DOjo=
  - secure: W63pZePoCltUYd7l5VBtj46vvH6WnXzqIibUf68FNkzI2XF3m3FLibhy3n/ikW+JmW2akTT5tSHq2VWZ5WuKFJmjeD4FfkNj5dU3f6/2SRDjp5kS9oiGmRNCYYfw4R81oqMQ9bp/Y4Ca1an+2FObxrszWE9cCyCXeEat8UjwAJa1oKIzLtSPKvjnVtPDeJcwIFIxBxo4PYXF3u2gh6sClcZQJ7rjIv+kFQQjP9GCSG48HSKZeBuXGmS6YO3pa5H3lVK1as7i7nQw2CaVk2qkFWjS7gct7tPGi8gJODOv1+mLupIicChi+5an86dNrzJWylnskMIYNS+AH8slChBdj2kHrZWUn+siMdXDvoXyV4if65wElxtkW08ZmraB2vEeNgtVeQrUMSIHPGXQTvCFLfQj2Zp+wB0vWB8qO9HFPAguDbAoRz0YfIzy02BXCpnIy2aRRoXW92nRLlAIfjCGAVlqnY6RSXQOsVJXqY7cvgn7Y3v+HvZlGaDMEaV1APTYxvyrCt3353SRXqmBc5G2lH/HcZAoCf8an5BOC0tXl7/17lUHxHtnLhsn+LQYttkDfwafW6P1TOW2vtMP+jyeG+H8SHEvqlGvr2ppUpYu53ijdD8Fldq2GR57QIAzZQW1Fv2BMLVdK1ftAwK/22+uv9I9my6azyhgKO28f0CG6i8=
  - secure: Nkb4fmGKt/LYVr8Stq8MiuGcY2nHa1UYVA8xeOdZ/qcy1SF8YDJ6V9dTqYKX//BXd8JK4CsiVTsC8BiqP9qcaeWha3uSAeiUAbR4eOZR/1SSIioKsQxdRvs9FiyBHH4tM1mvspOxVkYfJhMok+i+pPoX3kMzFWz88J8zi72aOJMWg8bXd54RVvQDN2AJVhdnmU3Fq9vgK0XF13KAO6U0fdrRp+H93PuhJz7xyvlbFh/hD2s1EZZPsSYDEy8HBPnPKRFxu7iyKBMsrh+jC56IrhER+y3z/l3cqJwxn7oPBpqfGk9/naI2v+6iN1htujpVHSgr79A/FoYuRbF8eFlrbwgFpLuuCQ77nHts9OjNR1Uz3jRkWMn2RQSSxX8qytwvy5zk8qimqjraeGiSkwO17/52t8Pdf9qBma6n2JQ/JPdyMAEtFTUJAbYRYgEGLfUQka8yrI8E9Y7HtQrwHIleCocukOTXF0MvzsnC0B5e4T6s4L2U0CID1SrEcgfd1svjkkQEb+C+mliNwWBP4V/tglLPiA3vb7urHjvhEiuMQhkO/V8mi15o61BDp0Xwn0OfGL2Zi84mxscZlh1gzEy2O+5keYKUO77v8RW8QoPxt/t2lPd0PJGNKj8+0jm4+PuK4/Vr3II7S1Tvjxya65Sb+WIBUWRJmTtXmWVdKc4QE5g=
  - secure: wChEi8vBwGRgExzVAG/6tla82KKjZ2oCfaYexLGQ9f3dB1vsCCSM9Yjmak6JoRwFR87WiGffc9vTjujM9upShkpFWNJNzXmezXzRxs6q6ixEYmekrhxH46Oet5WmIRZJrIkO4cqHvvjMeRqHN/ViHeNiUebtQo6V9x/51OfYic9clUvTMju97w0J0ijuCjZHdf88MjzK88HfpR2SBtMXonuq87G12tJuGX7zIMt4QOKYehNj7pyctbpvYyyRDXlsuxrx232s81O36rTX6plZN3amJjt/lhWAoFmoWj985g2fHfeDNqKzwH7Y3nAzBD8U8f7yy3BLgwdicdxgVp8lz4x0Dcao1P2i3+tUd16GpsP6hYcqG06g/5F1D0HD4ozWUJRPcP1fnPYaVBKtIt3lrtMN4IM5p8cNdhELiYr1sBVRe28UeCT+JjzI6ybZUp5ef9qahEMzp0y02U7ttCFfWUONA9Bh5+2KudmkV/Pdw61kKWpK+GdCd7MBnq2Qo26/3vTezCcoku256ppEqT0wF95G7JcCJQdpa9QxUzXX1/mMvbpUkcuAos+8nesyYZs+4fhkLYuDI/3UKQcvVghTa1+2ozljLpI0BdA/T1oTEdYnw/kwJLfzx8y7GNQAMdicR7nGin4vm0ATKTnrKzLhcSlFqCjD6Z6SB/qrKjuOlfU=
  - secure: Ej1e5+CNHaZWeIdSaZN9XNxwUz+qYO3tTnhNk6DoEjdTkMXNy/okEAmptiLjspeSgV2XkaIIv/6acrbYfwQhiY3p4fL8+0wiJ1E5o0nkMpxP2IgJkmDSLMeHkVU3n6bsDWi7D6OM7JnN6cFe3Sc3stK5CIuekbstmycCj55QKmxjazN7q5nMgoNbP7/AHVFD2AtZvNyb2hlsiYzyvkcqHUrRFaajLoXBTJeG5/zJNR/yTOQsg5wp7+oDz8c2fBRAuvDAU1PFBZfAcFI+ANaM0Q53moij+6GW76Q1mmYA7VgS1MqZb9n2iCXUK2Ts69UbQytmBF3pw4N+PYl/dOUFL7tdpOot0r5RQZHR14yVm88Sed45tX6xQuP2uBAm3CwokbJEYT34xN7e2hxiEFh3BWBOIsXQbK+HasLGcdBuelR6U+jTSUXr5nJKRFFaI9aAikPLf1XI8Y8f/N9WCYR8Je8BuHWZ44wqEz8I5wzkdOqVN+dAGP0YPu8fvbi/YgwmE4BEI2HZE4EX6WMkF+5zG6e4IelKMLhlmeXzsyjsgz8qfY1noJFbzYTljhcTnt/8LJzYMavSlwQEL0W+4u23aHLwAnKIw7NOw5JzNPzIgtPQn8CqU/CucrAU0h701WANnduGvhUosQEUwDSlT30/JnXwPN40aE81CGJ8/W+rLbM=
