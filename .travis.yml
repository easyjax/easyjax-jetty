# Copyright (c) 2018 OpenJAX
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the "Software"), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included in
# all copies or substantial portions of the Software.
#
# You should have received a copy of The MIT License (MIT) along with this
# program. If not, see <http://opensource.org/licenses/MIT/>.

dist: trusty
language: java
jdk:
- oraclejdk8
- oraclejdk11
install:
- cp settings.xml $HOME/.m2/settings.xml && rm -rf ~/.m2/repository/org/openjax
script:
- 'if [ "$TRAVIS_JDK_VERSION" = "oraclejdk8" ] &&
      [ "$TRAVIS_BRANCH" = "master" ] &&
      [ "$TRAVIS_PULL_REQUEST" = "false" ]; then
    sh -c "$SIGNING_KEY" | $GPG_EXECUTABLE --fast-import &> /dev/null &&
    mvn -e -U -DskipRTests -DrepoToken=$REPO_TOKEN clean deploy -P javadoc,report,deploy;
  else
    mvn -e -U -DskipRTests clean install;
  fi'
cache:
  directories:
    - ~/.m2/repository
env:
  global:
  - secure: x29gP/SNnPKhIxvMYoMnKJ+njowucYiwzkk4DVU0hj4pS8iVXt7znDfdqxI/K55W4ckGDKQdmYrO3pmt/YBC+D4bJBT+/40DpNDTrXotck5OfAmUllyC3TEFEVM+PR59oMdoIhRfbpXt2aHIqvq1qHqfL/F6JDbMZAl3QbWR6Vfxp2D2YgEn26On5MalL1Gbb37aIb9DDUtazbDCfDI7lRryuZ6kSZFPpcjdBpu3sBaR3jAaBJPlfEjFPMZoFY3gwpPVm6rbpDar1rHxxs3ewHYDydJFw9B58yv5phoEy4MoKGHeM+2AnIlr8v85+o5BGzpaAykevkL4+GxuSlzvrFTxg8ji97BOiRKhhoQEftu1XMUJySEbwE2qXTyJu8ccBU6hs8Np0yphB41YWY0VM0wlUY7tJjNelock48FqaWKwh9rj9APiADyooauf3cwcvf3IB7wyZ3LVGFurB5iaSSoXevyvpertzGmxxtRi1YBcc0yoRV9jq4/U3aXSEvDlGxgdqtRMsM83FPcxo31pOUjcInLqxc2+0JdPYNEgN8mK53PYFwOCa4itAOhUjq1KURthFUss7ng1qq63nKYeHud1FuqJPjW2AFdz6epV3dEUfZTbrHURG4V8W0g2perDzpyyPoELD3fw/Y5+nIpCMZxV/MY6+uVhHx9J2/sn1e0=
  - secure: LRhJPDXTYgSedtEnmh23aKmxjPIl++dSOxBFhG5Yqev0otZvd4bqe9vslJKdBQkQJE6f9eYNG6lI4sdDsvKMS3bhrRImB7MxqihjeKowzcm+KwFRz5+ttprMW+5yfPfZRPpI1C9MzJ7VZmKmtFR/WReUy+1wst3+4sncOq701hcEoAHZ2M5Ihtcmt/PPnhVIr2EjcKJmnfxXm02MvJ+bFeR6UrS3Axok1XUSVR+JcGWQuJDeG4y4GPwJu3Q8f6FtxQpKsejrtSyh2vZ8JZSPkt9SKQljoyI/lRs2Jz0yCv1A42n8c/rUWbiGuIGsEOqL6+pZPQe/I9kD9ZzsJTjiaN0hG1qgqAbWNGcdUuYNUo2l6zPcwWNQgtDS0L+VJTNI17Do+yA9xiOUiUbXm833QCFf27AOevrfP816GGnCQF2k8YouiqPJMF12mI42QbYW64YXlC1Qq4tkNj/tueLR4DFhvx4ete/KDi57X7yT6qCESwvX1Xi/FlD1AfiWdM6/vkoQm0qKYSxn/ys5Nh6YQG7wEwOUTeYgHKckMIPEmhvL9sORmK9dRpX1A8eueeg+B9xVKPJeEf6pjjx3EdZya0amDptPdufKUBcgg6alVwJNTVdP7+T7tm/gefbKPSxCeCITyuBlJm6dat+KMyERasknx07+wnC5p7Qp7KqBTlY=
  - secure: AulMNUUlpAn1tfu2KFNQ8dKTOqGRqnhpbTOvNh5994sBbcr5feOWbx+pGuPTfrZ4PoAq6stL0sQLelYAG8N6rvDKz5zWQ9TdFbPXLtTGrT+npox/RSBEnV6HAU/183YQaDW+C3QNXFGWJzpjWp8LOnJ7L9XVACvkTzZVo4FhoCoEW5NNWESNL4l5JROo6K1ih2qh1G26SLE8JJNfR/+kun26sy0UfM4d/9wHbgPu8TgruQGzkBwDH0lE3u+SKGR+ZQnSO27+TnFkKTs2yDmu43JMZAKfH/9Z2nY5d8az+LELG26aRxDlzjUyhSmh3yLU5E+MqGWx+F/dwm8Hjct4sTy2dTJa8KLmAT135LDVGPZUuPnFpg7EvVh6cIe9mz7tSG8yE8OEUKp3Eg9eHFw9TEpFlziHISwImjoj+tTMB+D9bzImBKnNCiza/zIXHQvMyuj0wRRh+4PDhpJ1gqsXRNcVI9QoxORiqNkiLBgA3wKu2BETPwNpONM7lV7rLK2hPf8vIZeetBJdVrT8mZlmSV+2bipwCaMpQPBhS7s2IuRQQwAe1+KaXJJKHuQtU7Qc8DeW13YE8V7dEs5IJWar51kbmryF3deTiPhE/niXBM0rUif4TYTk7KgLHqt/gEpra7qwxgBqQMesQYZaCWlwiq2/wxD6DAANjJWBiqm4Yko=
  - secure: StBeEi/ykF2FkiaaNjHwouEXxMasFf9ekLyN0sGanNvsRofEfC5G/WZZDxM1vF+KlxkJxHQb5BonzzcNPetUF25PUSdPjQsUS7mfQSVbghSsvgtf2f9jHtEz14rEetQRq1zhdjAH2fbXGwWgVN8jOb4s9CVjqv73XlGJv6vzQcLuYJmRQfmceufyRDCxtcoMoXt9JR3pJ8R3eV70C8YlyRslRcoE4rVOLEIEjIPPk+QMwnh3J9O9Cr1CDaxVJzh6kwZbMOR20UC/2kNI/iceJvJemOgOKbHbnJ1oT5WlwxZU00fym5r5WY74kHRw+GHIiGj1wI35EanbcjDz3n7p/3ycSyWLtvqVK3wT548WoRWGcFTPJpwPLgxp69DEa1a+jGjET0cTiKXSDJ7FtZkJ7u/BY4qFyOJLZWd3LRw/jF2IuHCpVPGf2YsXiSWv7mAiDdhkRCqGX4C7qij+vCE/fqInuvSSqjTqwzL06jYofKLn+6A+zEK7LHZHyYhFDDs9PLf2cjo98rFIUIp3qEuJXzbrL1+MHS5XRLDm6/BgZTK3+MpEZ1fQEnAbYnQ1O15t/KYZwH5/0R4KgeNYr7wRtGjqVL9NWSKTx3kboBM7mKooMtDp2b1ou1wSh/EgVTnNrJwU8A9klfZ9Y6uJhlW47CXNA0sPvyh2TZ2p7qBSOrs=
  - secure: hxuWAVfowA9NfRc2DsuiGTJ21cA1ty+KICdGERJDLvABxFoE1klA5KxvNsOHjYNJhjTr+BQ32Ch+BmhjV7ZP+97etmd93ipeUM/b5B6MVcqy4K56fzSqG4QMzA30lIsXYNlaxEjEjtGPYF9frmc3VN2B4+pm0CHpkSDMiVLWlHXE1n9hYX6l4bZdhe7Iuj92Ac2dbbVFDZI3jADO3TocdSPSQ5thyzafKBBT42gxF9KXkOPMiWKpFwng93PMGo8hbbtc6ScnITRkJP+LClNXwEmyHEAE+noDu2lVzD2/zWkH4BD2U4nKIIzfIN/t0C9ynMup8ZHHJ0OdTHhfuKxtV8wVtG7rx7UQBWsFioq91io3J6bwMBXt5uBVXZcb1eSahbDl9tq0TarDSzMJXkIznjgryJ6s5YsXGHEnDV2v+lNHdRzhzX8rc8ZxwhbE56FoVbaDETX/hE9hVuVzFqJ9dICIT85SyJ1mnX7gQ+UQLXQNh1Lpaz0IMCft33dxwORw4t0kU1gZhSIfmwIjTjBAZBaaJmdmqFRkboUN/KigOV3KFncYTG2oapW1kSuEw1vwE6/FzvdAGDya52o3crU7h7HrF4oEU29aN8AqT3Y8uEoPy/7O75Hbi4KRvSXi16KkVt5E9gM1GtrmixqAtM4RkwxURqbsgg+DJgJBo/v5YPw=
  - secure: l1eIBSE0JPMcgtoJG0h6JBpRSnAGaLiG9e34xgdsExRNCIuu4R6hXqn7tv4zr8PKnLX4GnIIvHXdV5YQH4iTlIXcO/LqOjw1zAzHeIih+bYK1Q00+mAX3uMSUVAaLKTb/n2w7EXJajOfKgzO6D8EkthZHkvwXAJam0gjNSRjrnE9LxY8cLpsyo/HPRVl91o8tTkrTq2u+aApx15NgkIh0tkOJhjkkdvmVwNvxFCAG+oYy4nOYksiEHPprVJgmkcRhiI4F4+6/yr+7wO2dmtdx1mJ2YZh71WuR6/Rt8PLiHf1XP6KxXImOsrtqr6UWp2wSCj2RO3tebXYWoK8ehQOWwf5fi52dyBi+tcBJ60PfZrF+p30aoQOZD67KqS/X+ZI2+h2/c45J9keHUho84FFNG/tCes6MrJiT44SHjWaFIQYWOkdyi5/jmwYpUwmsUHVaZK12fyYZE08Op2R07coutiA/RYOhSL4kf4sl6T6eJJAGcQxzNXSTJR1FTI+sL21ZiGi0iHD+gJ2aYzcJ+fnmafTmeD70OTs8bwK0HCjQDim8gbFVm4Pzf7waJQTsHtNDoVrxkYM7oclxU6zaMY2YaOjVfOw493DiygYPtzrSJf3SHim4HctgHzUTzNFFb9Ma/lC71dH8yU4LyWevjanCYx+nRLowXCheng1MrdfttU=
  - secure: 3hPECI5w4wkCTV5pQhfOBK2EwFhbhma5RNYI5A1eHpOwog69hNHS908VgdiuaaZXHg47n9v+48VV8F3jaJS21fATSKOW6NC79KzIDrr/GxP0smPlt6FFk3QksN7FgfQvlNSo2QpxNkuoGhlCcE/SH354JYxqxpq8AOEuqinVtEZFiyxZqlw0mfbNS0eeHCInVRLDD71CtBpJBnzvavB95K/edHAjdWlneF9POLBf47mfkjS/vEvY410BV7eqdai5tPLpDmjblPmwx/MIdWYpkFIEqTk3K1xx7B9I/DraIo7Ttyq4LUv6w/8g2kXs/1fG2uFrCBx0sMRsVLIZrfwaxZrX6UBTqMASntv9KvOJMT+jgZ82HCOijWrroRQL4uzGyEwRws9BaBuUNPVcABEXpzKRZRqvHllNjhMEgi4ttO/l5CK6Zfpl+0/JQjqPJmXpCrvolOWjbm7DdnP7rZmRee+QVLK3ZdKtAQEhOtIyXd3EPqKDApypz9+6FBRyawdFNVCucoHPc24XrM8Cc7r545rHT/bEJBFg5IbDmb4c+fl0W2hCpjbHplSQrpKm2T2IUL/gSGQvVlCMByHrQrQaUpaBb65NvKgCfLIIOIwgCe23sKN8LWwZPaH6uRqsLD3Nomdc/5GGO7Oy7Zi5eHCwyw/k0ciM0eBAb1+bGGv9Byw=
